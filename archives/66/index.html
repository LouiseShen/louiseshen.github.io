


<!DOCTYPE HTML>
<html class="no-js" lang="zh-cmn-Hans">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta charset="UTF-8">
    <!--IE 8浏览器的页面渲染方式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <!--默认使用极速内核：针对国内浏览器产商-->
    <meta name="renderer" content="webkit">
    <!--chrome Android 地址栏颜色-->
        <meta name="theme-color" content="#3a3f51" />
    
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <title>[reCAPTCHA]typecho添加reCAPTCHA验证码 - 马孔多不下雪</title>
            <link rel="icon" type="image/ico" href="https://4o5.xyz/images/logo.png">
        <meta name="description" content="Head Pic: 【女の子】&quot;miku  环绕声&quot; / Illustration by &quot;千夜QYS3&quot; [pixiv]发现typecho的这类插件很少，而且很难用，所以干脆现学现卖自己整个。..." />
<meta name="keywords" content="reCAPTCHA,typecho,集成" />
<meta name="generator" content="Typecho 1.1/17.10.30" />
<meta name="template" content="handsome" />
<link rel="pingback" href="https://4o5.xyz/action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://4o5.xyz/action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://4o5.xyz/action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="[reCAPTCHA]typecho添加reCAPTCHA验证码 &raquo; 马孔多不下雪 &raquo; RSS 2.0" href="https://4o5.xyz/feed/archives/66/" />
<link rel="alternate" type="application/rdf+xml" title="[reCAPTCHA]typecho添加reCAPTCHA验证码 &raquo; 马孔多不下雪 &raquo; RSS 1.0" href="https://4o5.xyz/feed/rss/archives/66/" />
<link rel="alternate" type="application/atom+xml" title="[reCAPTCHA]typecho添加reCAPTCHA验证码 &raquo; 马孔多不下雪 &raquo; ATOM 1.0" href="https://4o5.xyz/feed/atom/archives/66/" />
<link rel="stylesheet" type="text/css" href="https://4o5.xyz/usr/plugins/CodePrettify/static/styles/BlackMac.css" />
<link rel="amphtml" href="https://4o5.xyz/amp/66">
<link rel="miphtml" href="https://4o5.xyz/mip/66">

        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({messageStyle: "none",tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
        <!-- 第三方CDN加载CSS -->
        <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">


    <!-- 本地css静态资源 -->
    <link rel="stylesheet" href="https://4o5.xyz/usr/themes/handsome/assets/css/function.min.css?v=6.0.020191205" type="text/css" />
    <link rel="stylesheet" href="https://4o5.xyz/usr/themes/handsome/assets/css/handsome.min.css?v=6.0.020191205" type="text/css" />



    <!--主题组件css文件加载-->
    <link rel="stylesheet" href="https://4o5.xyz/usr/themes/handsome/assets/css/features/jquery.fancybox.min.css?v=6.0.020191205" type="text/css" />
            <link rel="stylesheet" href="https://4o5.xyz/usr/themes/handsome/assets/css/features/code/custom.min.css?v=6.0.020191205" type="text/css" />
    
    <!--引入英文字体文件-->
        <link rel="stylesheet" href="https://4o5.xyz/usr/themes/handsome/assets/css/font.min.css?v=6.0.020191205" type="text/css" />
    
    <style type="text/css">
        
        html.bg {
        background: url(https://ws1.sinaimg.cn/large/0062FpZ7gy1fygkk8o5fij318g0p0e81.jpg) center center no-repeat no-repeat fixed #6A6B6F;background-size: cover;
        }
        .cool-transparent .off-screen+* .app-content-body {
        background: url(https://ws1.sinaimg.cn/large/0062FpZ7gy1fygkk8o5fij318g0p0e81.jpg) center center no-repeat no-repeat fixed #6A6B6F;background-size: cover;
        }
@media (max-width:767px){
    html.bg {
        background: url() center center no-repeat no-repeat fixed #6A6B6F;background-size: cover;
        }
        .cool-transparent .off-screen+* .app-content-body {
        background: url() center center no-repeat no-repeat fixed #6A6B6F;background-size: cover;
        }
}
@charset "utf8";.no-margin{margin:0!important}::-webkit-scrollbar{width:8px!important;height:8px!important}::-webkit-scrollbar-thumb{border-radius:4px;background-color:#999!important}::-webkit-scrollbar-track-piece{background:#eee!important}::-webkit-scrollbar-thumb:hover{background-color:#777!important}::-webkit-scrollbar-thumb:active{background-color:#555!important}#sidebar>section:not(#tag_toc){opacity:1}.ophide{opacity:0!important}#toc{max-height:calc(100vh - 120px)!important}.navbar-header{box-shadow:-2px 2px 2px rgba(0,0,0,.05),0 1px 0 rgba(0,0,0,.05)}#header>.collapse{box-shadow:2px 2px 2px rgba(0,0,0,.05),0 1px 0 rgba(0,0,0,.05)}.entry-content{background-color:transparent}.panel-small .pos50t-meta{padding-left:25px;padding-right:25px}.b-light{border-color:#bbb4}.tip:before{margin-top:0!important}#post-panel>div.blog-post>.panel-small,#post-panel>div.blog-post>.panel:not(.b-a){transition:.2s;box-shadow:1px 1px 3px 1px rgba(0,0,0,.2)!important}#post-panel>div.blog-post>.panel-small:hover,#post-panel>div.blog-post>.panel:not(.b-a):hover{box-shadow:1px 1px 5px 2px rgba(0,0,0,.3)!important}.list-group-item{background-color:rgba(255,255,255,.8)}.thumb-lg{width:130px}#post-content,#post-panel,#sidebar,#tag_toc,#widget-tabs-4-comments .list-group-item{background-color:transparent!important}#alllayout.app-aside-folded .tooltip{display:none!important}#bg{background-image:url(https://cdn.pixiv.world/images/headpic/tiny/bg.jpg);background-size:cover;background-position:right bottom;background-repeat:no-repeat;position:fixed;z-index:-1;top:50px;left:0;right:0;bottom:0}.standpage{width:100%;height:calc(100% - 50px);position:fixed;top:50px;left:0}.standpage,aside,aside *{transition:.3s}@media screen and (min-width:768px){.topButton.panel.panel-default{display:none}#bg,.standpage{left:200px}.standpage{height:calc(100% - 101px);width:calc(100% - 200px)}.app-aside-folded #bg,.app-aside-folded .standpage{left:60px}.app-aside-folded .standpage{width:calc(100% - 60px)}}.m-t-lg.m-b-lg,.wrapper-md>#comments,.wrapper-md>.blog-post,.wrapper-md>.breadcrumb,.wrapper-md>.no_search_result{max-width:800px;margin-left:auto;margin-right:auto}#post-panel>div.blog-post>.panel,#post-panel>div.blog-post>.panel-small,.wrapper-md>#comments,.wrapper-md>.breadcrumb{background-color:rgba(255,255,255,.9)}.wrapper-md article,.wrapper-md>#comments{border-radius:5px;overflow:hidden}.bg-auto:before{bottom:51px}@media screen and (max-width:991px){#bg{background-image:url(https://cdn.pixiv.world/images/headpic/tiny/bg_m.jpg);background-position:center center}aside.col.no-border-xs{border:0;opacity:1!important;background-color:rgba(255,255,255,.8)}}@media screen and (min-width:992px){aside.col.w-md.b-l{background-color:rgba(255,255,255,.9)}aside.col.w-md.b-l:hover{background-color:#fff}}header.wrapper-md{background-color:rgba(246,248,248,.93)!important}.blog-post>.panel,.blog-post>.panel-small{border:0;border-radius:5px}.index-post-img{border-top-left-radius:5px;border-top-right-radius:5px;overflow:hidden}.index-post-img-small{overflow:hidden}.blog-post>.panel .index-post-img .item-thumb,.index-post-title a,.panel-small .index-post-img-small .item-thumb-small{transition:.2s}.blog-post>.panel-small:hover .index-post-img-small .item-thumb-small,.blog-post>.panel:hover .index-post-img .item-thumb{transform:scale(1.05)}#footer>.wrapper{background-color:rgba(237,241,242,.8)}.streamline{margin-left:20px;padding-right:10px}.streamline .comment-body{position:relative}aside.col.w-md.no-border-xs{transition:.3s}.visible-xs-inline{display:inline-block!important}@media screen and (min-width:768px) and (max-width:1140px){.visible-xs-inline{display:none!important}}.tocify-item{background-color:rgba(255,255,255,.8)}.tocify-item.active{color:#7266ba;font-weight:700}#kotori{position:absolute;left:-15px;bottom:-15px;max-height:110px;transition:.3s}#kotori:hover{left:0;bottom:0}#kotori.hidekotori{left:-110px;bottom:-110px}@media screen and (max-width:767px){#kotori{display:none}.blog-post>.panel:hover .index-post-img .item-thumb{transform:none!important}}.index-post-title a:hover{color:#2ebaae}.wrapper-md .comment-list .comment-children,.wrapper-md .comment-list .comment-parent{padding-top:10px;border-top:1px solid #ddd}.max-img{max-height:400px}.navi-wrap .navi.clearfix>ul.nav{padding-bottom:100px}.app-aside-folded.navi-wrap{max-height:calc(100% - 50px)}.lg-backdrop{background-color:rgba(0,0,0,.8)}.skPlayer-name{font-family:"Source Sans Pro","Hiragino Sans GB","Microsoft Yahei",SimSun,Helvetica,Arial,Sans-serif}html.fancybox-enabled{overflow-y:auto}.fancybox-bg{background-color:rgba(0,0,0,.95)}.fancybox-arrow:after{background-color:rgba(0,0,0,.8)}.green,.lblue,.red,.share,.yellow{background-position-y:50%}.timeline .tl-date{color:#fff;text-shadow:0 0 4px #000}body.modal-open{overflow-y:auto;padding-right:0!important}.reply2view{background-color:transparent;border:1px solid #bbb}#content{transition:.3s}.OwO .OwO-logo{height:28px}#tag_toc.fixed #toc{width:100%}.page-navigator .next a,.page-navigator .prev a{height:31px}.page-navigator>li:last-child>a,.page-navigator>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.item-thumb-small{background-position:left}.panel .post-meta.wrapper-lg{padding:20px}#comments pre code{display:inline}.wrapper-md>#comments{border:1px solid #fff;padding:10px 30px 20px}.hideContent{background-color:transparent;padding:0}img[mw400]{max-width:400px!important;width:100%}.mw400{max-width:400px}.inner-image{background-position:center}.inser-title{color:#555!important}.inster-summary{color:#58666e!important}.preview .post-inser{background-color:rgba(255,255,255,.8);transition:.3s}.preview .post-inser:hover{background-color:rgba(255,255,255,1)}#aside-user span.avatar{animation-timing-function:cubic-bezier(0,0,.07,1)!important;border:0 solid}#alllayout:not(.app-aside-folded) #aside-user span.avatar:hover{transform:rotate(360deg) scale(1.2);border-width:5px;animation:.5s avatar}@keyframes avatar{from{transform:rotate(0) scale(1);border-width:0}to{transform:rotate(360deg) scale(1.2);border-width:5px}}#searchform{margin-right:-10px}.compensate-for-scrollbar,.compensate-for-scrollbar #header{padding-right:8px}.compensate-for-scrollbar #bg{transition-duration:0s;margin-right:8px}@media screen and (min-width:1200px){.panel-small .post-meta{padding:13px 15px!important}.blog-post .post-meta.wrapper-lg{padding-top:15px}.sticky{position:absolute;top:12px;left:15px}.panel .item-thumb{height:300px}#post-panel .blog-post{position:relative}#post-panel>div.blog-post>.panel{overflow:hidden}#post-panel>div.blog-post>.panel .post-meta{position:relative;margin-top:-300px;height:300px;padding-top:133px!important;padding-bottom:0!important;background-color:rgba(0,0,0,.3);color:#fff!important;transition:.3s}#post-panel>div.blog-post>.panel .post-meta,#post-panel>div.blog-post>.panel-small .post-meta{border-radius:5px}#post-panel>div.blog-post>.panel .post-meta *,#post-panel>div.blog-post>.panel-small .post-meta *{color:#fff!important}#post-panel>div.blog-post>.panel .post-meta>h2,#post-panel>div.blog-post>.panel-small .post-meta>h2{text-align:center;text-shadow:0 0 3px #fff}#post-panel>div.blog-post>.panel .post-meta>div,#post-panel>div.blog-post>.panel .post-meta>p,#post-panel>div.blog-post>.panel-small .post-meta>div,#post-panel>div.blog-post>.panel-small .post-meta>p{transition:.3s;transform:translateY(-10px);opacity:0}#post-panel>div.blog-post>.panel .post-meta>.text-muted,#post-panel>div.blog-post>.panel-small .post-meta>.text-muted{position:absolute;bottom:20px}#post-panel>div.blog-post>.panel .post-meta>.line{position:absolute;bottom:40px;width:740px}#post-panel>div.blog-post>.panel-small .post-meta>.line{position:absolute;bottom:40px;width:350px}#post-panel>div.blog-post>.panel .post-meta>.summary{position:absolute;bottom:60px;width:740px}#post-panel>div.blog-post>.panel-small .post-meta>.summary{position:absolute;bottom:60px;width:350px}#post-panel>div.blog-post>.panel-small{display:inline-block;height:300px;width:calc(50% - 10px);margin-right:15px}#post-panel>div.blog-post>.panel-small:nth-child(2n){margin-right:0}#post-panel>div.blog-post>.panel-small .index-img-small,#post-panel>div.blog-post>.panel-small .index-img-small .item-thumb-small{height:100%;width:100%}#post-panel>div.blog-post>.panel-small .post-meta{position:absolute;height:300px;width:calc(50% - 10px);padding:133px 20px 0!important;background-color:rgba(0,0,0,.3);color:#fff!important;transition:.3s}#post-panel>div.blog-post>.panel-small:hover .post-meta,#post-panel>div.blog-post>.panel:hover .post-meta{background-color:rgba(0,0,0,.6);padding-top:80px!important}#post-panel>div.blog-post>.panel-small:hover .post-meta>div,#post-panel>div.blog-post>.panel-small:hover .post-meta>p,#post-panel>div.blog-post>.panel:hover .post-meta>div,#post-panel>div.blog-post>.panel:hover .post-meta>p{opacity:1;transform:translateY(0)}#post-panel .ahover{display:block;position:absolute;top:0;left:0;right:0;bottom:0}.blog-post>.panel-small:hover .index-post-img-small,.blog-post>.panel:hover .index-post-img{filter:blur(3px)}}header.bg-light.wrapper-md{margin-top:30px;background-color:transparent!important;border:0;text-align:center;text-shadow:0 0 3px #000}header.wrapper-md *{color:#fff}header.wrapper-md h1{font-size:32px;font-weight:700!important}.panel-small>.p-b-none{padding-bottom:0!important}.comment-author>.fn+label{padding-top:.37em;padding-bottom:.37em;margin-bottom:0}.ua-plugin{opacity:0;transition:.3s;background-color:#7266ba;color:#fff;padding-bottom:.2em;margin-left:5px}div.comment-body:hover .ua-plugin{opacity:1}.comment-author>*{display:inline-block}@media screen and (max-width:600px){.ua-plugin{display:none}}@media screen and (max-width:365px){.comment-author>.fn+label{display:none}}.ua-os{margin-left:-.6em}ul.nav-sub>li>a>i{margin-right:15px}#myModal .modal-dialog{max-width:calc(100% - 20px);width:400px}#myModal .modal-content{overflow:hidden}#myModal .modal-body,#myModal .modal-body img{padding:0}.link-main{padding:50px 0 50px 20px;text-align:center}.link-main h3{margin-top:0}.link-main .item{display:inline-block;letter-spacing:0;margin-right:20px;margin-bottom:20px;width:289px;height:240px;font-size:14px;overflow:hidden;border-radius:5px;background:rgba(255,255,255,.95);border:1px solid #e1e8ed;transition:background .2s}.link-main .link-bg{position:relative;height:90px;padding:0 1em;background-color:#777}.link-main .link-bg .bg:before{display:block;content:"";position:absolute;left:0;height:100%;width:100%;background:rgba(0,0,0,.5)}.link-main .link-bg .link-avatar{position:absolute;bottom:-50px;border:4px solid #fff;border-radius:100%;background-color:#fff;box-shadow:0 0 5px rgba(0,0,0,.5)}.link-main .link-bg .link-avatar img{border-radius:100%}.link-main .avatar{display:block;object-fit:cover}.link-main .bg,.link-main .link-bg{background-repeat:no-repeat;background-position:center;background-size:cover;display:block}.link-main .bg{position:absolute;top:0;bottom:0;left:0;right:0;filter:blur(1.5px);background-color:#fff}.link-main .meta{padding:.9em 1em;text-align:right}.link-main .info{color:#525766;padding:0 1em 1em}.link-main .info .name{font-weight:600;font-size:16px}@media screen and (max-width:330px){.link-main{padding:50px 0}.link-main .item{margin-right:0}}.link-main .item:hover{background:rgba(255,255,255,1)}.link-main .item:hover .bg{filter:blur(.1px)}.readers-list a:hover{left:0}.readers-list-a{background-color:rgba(255,255,255,.5)!important;transition:.3s}.readers-list-a:hover{background-color:rgba(255,255,255,.8)!important}.panel-heading.collapsed{position:relative}.panel-body.collapse:not([aria-expanded=true]){display:block;position:relative;padding:0!important;height:0!important;z-index:-1000}.panel-body.collapse:not([aria-expanded=true]) *{display:none}.panel-body.collapse:not([aria-expanded=true]) h1,.panel-body.collapse:not([aria-expanded=true]) h2,.panel-body.collapse:not([aria-expanded=true]) h3,.panel-body.collapse:not([aria-expanded=true]) h4,.panel-body.collapse:not([aria-expanded=true]) h5,.panel-body.collapse:not([aria-expanded=true]) h6{display:block;line-height:1px!important;margin:0!important;padding:0!important;position:relative!important;top:-50px}.secret_comment{top:5px}.OwO.OwO-open .OwO-body{display:table}    .nav-tabs-alt .nav-tabs>li[data-index="2"].active~.navs-slider-bar {
        transform: translateX(405%);
    }
    .nav-tabs-alt .nav-tabs>li[data-index="0"].active~.navs-slider-bar {
        transform: translateX(100%);
    }    </style>

    <!--全站jquery-->
    <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>

    <!--网站统计代码-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131099004-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-131099004-1');
</script>
<script type="text/javascript" src="https://4o5.xyz/usr/plugins/CloudflareAnalytics/assets/Chart.min.js"></script>
<style type="text/css" src="https://4o5.xyz/usr/plugins/CloudflareAnalytics/assets/Chart.min.css"></style>
    <script src="https://4o5.xyz/usr/themes/handsome/assets/js/features/fancyMorph.min.js"></script>


</head>

<body id="body" class="fix-padding">

	<!-- aside -->
	  
  <div id="alllayout" class="app app-aside-fix no-container app-header-fixed ">  <!-- headnav -->
  <div id="bg"></div>
    <header id="header" class="fix-padding app-header navbar box-shadow-bottom-lg" role="menu">
      <!-- navbar header（交集处） -->
        <div class="text-ellipsis navbar-header bg-white">
        <button class="pull-right visible-xs" ui-toggle-class="show animated animated-lento fadeIn" target=".navbar-collapse">
            <span class="menu-icons"><i data-feather="search"></i></span>
        </button>
        <button class="pull-left visible-xs" ui-toggle-class="off-screen animated" target=".app-aside" ui-scroll="app">
            <span class="menu-icons"><i data-feather="menu"></i></span>
        </button>
        <!-- brand -->
        <a href="https://4o5.xyz/" class="navbar-brand text-lt">
                                                <i class="fontello fontello-home"></i>
                                <span class="hidden-folded m-l-xs">马孔多不下雪</span>
                    </a>
        <!-- / brand -->
      </div>
      <!-- / navbar header -->

      <!-- navbar collapse（顶部导航栏） -->
    <div class="collapse pos-rlt navbar-collapse bg-white">
        <!-- search form -->
        <form id="searchform1" class="searchform navbar-form navbar-form-sm navbar-left shift" method="post"
              role="search">
          <div class="form-group">
            <div class="input-group rounded bg-white-pure box-shadow-wrap-normal">
              <input  autocomplete="off" id="search_input" type="search" name="s" class="transparent rounded form-control input-sm no-borders padder" required placeholder="输入关键词搜索…">
                <!--搜索提示-->
                <ul id="search_tips_drop" class="small-scroll-bar dropdown-menu hide" style="display: block;top: 
                30px; left: 0px;">
                </ul>
              <span id="search_submit" class="transparent input-group-btn">
                  <button  type="submit" class="transparent btn btn-sm">
                      <span class="feathericons" id="icon-search"><i data-feather="search"></i></span>
                      <span class="feathericons animate-spin  hide" id="spin-search"><i
                                  data-feather="loader"></i></span>
<!--                      <i class="fontello fontello-search" id="icon-search"></i>-->
<!--                      <i class="animate-spin  fontello fontello-spinner hide" id="spin-search"></i>-->
                  </button>
              </span>
            </div>
          </div>
        </form>
          <a href="" style="display: none" id="searchUrl"></a>
        <!-- / search form -->
                <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown"><a target="_blank" href="https://blog.4o5.xyz" class="dropdown-toggle"><i class="iconfont icon-bokeyuan icon-fw"></i><span class="visible-xs-inline">Blog</span></a></li><li class="dropdown"><a target="_blank" href="https://4o5.xyz/en" class="dropdown-toggle"><i class="glyphicon glyphicon-globe icon-fw"></i><span class="visible-xs-inline">English</span></a></li><li class="dropdown"><a target="_blank" href="https://4o5.xyz/anime.html" class="dropdown-toggle"><i class="fontello fontello-youtube-play icon-fw"></i><span class="visible-xs-inline">アニメ番組</span></a></li><li class="dropdown"><a target="_blank" href="https://4o5.xyz/contract.html" class="dropdown-toggle"><i class="fontello fontello-edit icon-fw"></i><span class="visible-xs-inline">留言板</span></a></li><li class="dropdown"><a target="_blank" href="https://4o5.xyz/cross.html" class="dropdown-toggle"><i class="fontello fontello-user icon-fw"></i><span class="visible-xs-inline">关于我</span></a></li>                      <!--闲言碎语-->
          <li class="dropdown">
            <a href="#" data-toggle="dropdown" class="feathericons dropdown-toggle">
                <i data-feather="twitch"></i>
                <span class="visible-xs-inline">
              闲言碎语              </span>
              <span class="badge badge-sm up bg-danger pull-right-xs"></span>
            </a>
            <!-- dropdown -->
            <div class="dropdown-menu w-xl animated fadeInUp">
              <div class="panel bg-white">
                <div class="panel-heading b-light bg-light">
                  <strong>
              闲言碎语                  </strong>
                </div>
                <div class="list-group" id="smallRecording">
                  <a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">发型全局静态化之后很快鸭<br><small class="text-muted">2020-2-8 08:39:50</small></span></a><a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">过安检时听到转身一词时某电影里面这词的粤语发音总在耳边回荡<br><small class="text-muted">2020-1-20 08:37:02</small></span></a><a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">arctime不支援gpu加速极端差评明天还要考试呢看来只能八点半再去学校了<br><small class="text-muted">2020-1-12 23:07:18</small></span></a>                </div>
              </div>
            </div>
          </li>
          <!--/闲言碎语-->
                                </ul>
      </div>
      <!-- / navbar collapse -->
  </header>
  <!-- / headnav -->

  <!--选择侧边栏的颜色-->
  <aside id="aside" class="app-aside hidden-xs bg-white ">  <!--<aside>-->
        <div class="aside-wrap" layout="column">
        <div class="navi-wrap scroll-y scroll-hide" flex>
          <!-- user -->
          <div class="clearfix hidden-xs text-center hide  show" id="aside-user">
            <div class="dropdown wrapper vertical-wrapper">
                <div ui-nav>
                          <a href="https://4o5.xyz/cross.html">
                            <span class="thumb-lg w-auto-folded avatar m-t-sm  vertical-avatar">
                  <img src="https://4o5.xyz/images/avatar.png" class="img-full img-circle normal-shadow">
                </span>
              </a>
                </div>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle hidden-folded  vertical-flex">
                <span class="clear">
                  <span class="block m-t-sm">
                    <strong class="font-bold text-lt">Louise</strong>
                    <b class="caret"></b>
                  </span>
                  <span class="text-muted text-xs block">心有萌猫，细嗅蔷薇</span>
                </span>
              </a>
              <!-- dropdown -->
              <ul class="dropdown-menu animated fadeInRight w hidden-folded no-padder">
                <li class="wrapper b-b m-b-sm bg-info m-n">
                  <span class="arrow top hidden-folded arrow-info"></span>
                  <div>
                                                  <p>早上好，永远年轻，永远热泪盈眶</p>
                                  </div>
                  <div class="progress progress-xs m-b-none dker">
                    <div class="progress-bar bg-white" data-toggle="tooltip" data-original-title="时间已经度过41.67%" style="width: 41.67%"></div>
                  </div>
                </li>
              </ul>
              <!-- / dropdown -->
            </div>
          </div>
          <!-- / user -->

          <!-- nav -->
          <nav ui-nav class="navi clearfix">
            <ul class="nav">
             <!--index-->
                <div class="line dk hidden-folded"></div>
                <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
                <span>导航</span>
              </li>
                                          <!--主页-->
              <li>
                <a href="https://4o5.xyz/" class="auto">
                    <span class="nav-icon"><i data-feather="home"></i></span>
                    <span>首页</span>
                </a>
              </li>
              <!-- /主页 -->
                                                        <li >
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
                  <i class="fontello fontello-gear"></i>
                  <span>好东西？</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a>
                      <span>好东西？</span>
                    </a>
                  </li>
                  <li> <a target="_blank" href="https://oldblog.4o5.xyz/PrivateBin" class="auto"><i class="glyphicon glyphicon-folder-close icon text-md"></i><span>PasteBin</span></a></li>
                  <li> <a target="_blank" href="https://a.4o5.xyz" class="auto"><i class="iconfont icon-links icon text-md"></i><span>短链接</span></a></li>
                  <li> <a target="_blank" href="https://oldblog.4o5.xyz/2048/index.html" class="auto"><i class="iconfont icon-star icon text-md"></i><span>2048</span></a></li>
                  <li> <a target="_blank" href="https://dev.4o5.xyz/metronome/index.html" class="auto"><i class="fontello fontello-volume-up icon text-md"></i><span>节拍器</span></a></li>
                  <li> <a target="_blank" href="https://www.pixiv.world" class="auto"><i class="fontello fontello-picture icon text-md"></i><span>个人图床</span></a></li>
                </ul>
              </li>
                              <li class="line dk"></li>
			<!--Components-->
              <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
                <span>组成</span>
              </li>
              <li >
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
                  <i class="fontello fontello-user"></i>
                  <span>个人项目</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a>
                      <span>个人项目</span>
                    </a>
                  </li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/70/" class="auto"><span>[Cloudflare Analytics]利用Cloudflare API创建自己的analytics面板</span></a></li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/72/" class="auto"><span>[Typecho插件]更方便的集成Cloudflare统计功能至typecho</span></a></li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/84/" class="auto"<span>[Java项目]更方便的插入数学公式</span></a></li>
                </ul>
              </li>
              <li >
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
                  <i class="fontello fontello-user"></i>
                  <span>学习项目</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a>
                      <span>学习项目</span>
                    </a>
                  </li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/74/" class="auto"><span>Java编程思想</span></a></li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/75/" class="auto"><span>具体数学</span></a></li>
                  <li> <a target="_self" href="https://4o5.xyz/archives/77/" class="auto"><span>2020高考</span></a></li>
                </ul>
              </li>
              <!--分类category-->
              <li >
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
<!--                  <i class="glyphicon glyphicon-th"></i>-->
                    <span class="nav-icon"><i data-feather="grid"></i></span>

                    <span>分类</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a>
                      <span>分类</span>
                    </a>
                  </li>
                  <!--循环输出分类-->
                    <li><a href="https://4o5.xyz/category/server/"><b class="badge pull-right">10</b><span>伺服器</span></a></li><li><a href="https://4o5.xyz/category/something/"><b class="badge pull-right">9</b><span>乱七八糟的</span></a></li><li><a href="https://4o5.xyz/category/tech/"><b class="badge pull-right">24</b><span>技术？不存在的</span></a></li><li><a href="https://4o5.xyz/category/good/"><b class="badge pull-right">13</b><span>好东西</span></a></li><li><a href="https://4o5.xyz/category/image/"><b class="badge pull-right">3</b><span>相册</span></a></li>                </ul>
              </li>
              <!--独立页面pages-->
              <li>
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
                    <span class="nav-icon"><i data-feather="file"></i></span>
                  <span>页面</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a data-no-instant>
                      <span>页面</span>
                    </a>
                  </li><!--这个字段不会被显示出来-->
                  <!--循环输出独立页面-->
                                                                                   <li><a href="https://4o5.xyz/moon.html"><span>月盈阁</span></a></li>
                                                                 <li><a href="https://4o5.xyz/anime.html"><span>アニメ番組</span></a></li>
                                                                 <li><a href="https://4o5.xyz/github.html"><span>实验室</span></a></li>
                                                                 <li><a href="https://4o5.xyz/link.html"><span>链接集中营</span></a></li>
                                                                 <li><a href="https://4o5.xyz/contract.html"><span>留言板</span></a></li>
                                                                 <li><a href="https://4o5.xyz/archives.html"><span>归档页</span></a></li>
                                                                 <li><a href="https://4o5.xyz/cross.html"><span>关于我</span></a></li>
                                                                 <li><a href="https://4o5.xyz/links.html"><span>友情链接</span></a></li>
                                   </ul>
              </li>
              <!--友情链接-->
              <li>
                <a class="auto">
                  <span class="pull-right text-muted">
                    <i class="fontello icon-fw fontello-angle-right text"></i>
                    <i class="fontello icon-fw fontello-angle-down text-active"></i>
                  </span>
                    <span class="nav-icon"><i data-feather="user"></i></span>
                  <span>友链</span>
                </a>
                <ul class="nav nav-sub dk">
                  <li class="nav-sub-header">
                    <a data-no-instant>
                      <span>友链</span>
                    </a>
                  </li>
                  <!--使用links插件，输出全站友链-->
                 <li data-original-title="命运从未抛弃每一个努力向上的灵魂，坚持过，努力过，最终会等来好消息
" data-toggle="tooltip" 
data-placement="top"><a href="https://www.cnblogs.com/Mychael" target="_blank"><span>Mychael</span></a></li><li data-original-title="niiickの异次元世界" data-toggle="tooltip" 
data-placement="top"><a href="https://blog.csdn.net/niiick" target="_blank"><span>niiick</span></a></li><li data-original-title="一个神秘的人" data-toggle="tooltip" 
data-placement="top"><a href="https://www.eknown.cn/" target="_blank"><span>空夜's Blog</span></a></li><li data-original-title="一个神秘的人" data-toggle="tooltip" 
data-placement="top"><a href="http://www.52iyun.cn" target="_blank"><span>Zex ' s Blog</span></a></li><li data-original-title="一个神秘的人" data-toggle="tooltip" 
data-placement="top"><a href="https://blog.illusionalsky.cn/" target="_blank"><span>可爱的诗和远方qwq</span></a></li><li data-original-title="墙角数枝梅，凌寒独自开。" data-toggle="tooltip" 
data-placement="top"><a href="https://www.micdz.cn/" target="_blank"><span>douglas’s blog</span></a></li><li data-original-title="生活不止眼前的苟且，还有诗和远方！" data-toggle="tooltip" 
data-placement="top"><a href="https://xinyu19.com" target="_blank"><span>心语难诉</span></a></li><li data-original-title="一个神秘的人" data-toggle="tooltip" 
data-placement="top"><a href="https://space.bilibili.com/22716936/#" target="_blank"><span>叶小黑君工作室-MYSB</span></a></li><li data-original-title="声优宝贝" data-toggle="tooltip" 
data-placement="top"><a href="https://www.wumiantu.com/" target="_blank"><span>撩人的无眠兔</span></a></li><li data-original-title="人要清醒，外面的掌声越热烈越危险" data-toggle="tooltip" 
data-placement="top"><a href="https://www.xcnte.com" target="_blank"><span>Xcnte' s Blog</span></a></li><li data-original-title="虽然我们互相笑着说“回头见”，但是我们都心知肚明，分离即永别。" data-toggle="tooltip" 
data-placement="top"><a href="https://www.ihewro.com" target="_blank"><span>友人C</span></a></li><li data-original-title="一个瑟瑟发抖的萌新" data-toggle="tooltip" 
data-placement="top"><a href="https://nai.si" target="_blank"><span>奈の斯</span></a></li>                </ul>
              </li>
                            </ul>
          </nav>
          <!-- nav -->
        </div>
          <!--end of .navi-wrap-->
          <!--left_footer-->
          
      </div><!--.aside-wrap-->
  </aside>
<!-- content -->
<div id="content" class="app-content">
    <!--loading animate-->
    <div id="loading" class="butterbar active hide">
            <span class="bar"></span>
        </div>	<!-- / aside -->
<!-- <div id="content" class="app-content"> -->
   <a class="off-screen-toggle hide"></a>
   <main class="app-content-body ">
    <div class="hbox hbox-auto-xs hbox-auto-sm">
    <!--文章-->
     <div class="col center-part">
         <!--生成分享图片必须的HTML结构-->
             <!--标题下的一排功能信息图标：作者/时间/浏览次数/评论数/分类-->
      
        <header id="small_widgets" class="bg-light lter wrapper-md">
             <h1 class="entry-title m-n font-thin text-black l-h">[reCAPTCHA]typecho添加reCAPTCHA验证码<a class="plus-font-size" data-toggle="tooltip" data-original-title="点击改变文章字体大小"><i data-feather="type"></i></a><a data-morphing="" id="morphing" data-src="#morphing-content" href="javascript:;" class="read_mode superscript m-l-sm" 
data-toggle="tooltip" data-placement="right" data-original-title="阅读模式"><i data-feather="book-open"></i></a></h1>       <!--文章标题下面的小部件-->
                  <ul  class="entry-meta text-muted list-inline m-b-none small
             post-head-icon">
             <!--作者-->
             <li class="meta-author"><span class="post-icons"><i data-feather="user"></i></span><span
                         class="sr-only">博主：</span> <a class="meta-value" href="https://4o5.xyz/author/1/" rel="author"> Louise</a></li>
             <!--发布时间-->
             <li class="meta-date"><span class="post-icons"><i data-feather="clock"></i></span><span class="sr-only">发布时间：</span><time class="meta-value">2019 年 07 月 25 日</time></li>
             <!--浏览数-->
             <li class="meta-views"><span class="post-icons"><i data-feather="eye"></i></span><span class="meta-value">683次浏览</span></li>
             
             <!--文字数目-->
             <li class="meta-word"><span class="post-icons"><i data-feather="pen-tool"></i></span><span class="meta-value">5888字数</span></li>
             <!--分类-->
             <li class="meta-categories"><span class="post-icons"><i data-feather="hash"></i></span><span class="sr-only">分类：</span> <span class="meta-value"><a href="https://4o5.xyz/category/good/">好东西</a></span></li>
         </ul>
      </header>
      <div class="wrapper-md" id="post-panel">
	   <ol class="breadcrumb bg-white-pure" itemscope=""><li>
                 <a href="https://4o5.xyz/" itemprop="breadcrumb" title="返回首页" data-toggle="tooltip"><span class="home-icons"><i data-feather="home"></i></span>首页</a>
             </li><li class="active">正文&nbsp;&nbsp;</li></ol>       <!--博客文章样式 begin with .blog-post-->
       <div id="postpage" class="blog-post">
        <article class="single-post panel">
        <!--文章页面的头图-->
        <div class="entry-thumbnail" aria-hidden="true"><div class="item-thumb lazy" data-original="https://cdn.pixiv.world/images/headpic/tiny/cid=66.jpg" style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAA1JREFUCJljePfx038ACXMD0ZVlJAYAAAAASUVORK5CYII=)"></div></div>         <!--文章内容-->
         <div id="post-content" class="wrapper-lg">
          <div class="entry-content l-h-2x">
          <p>Head Pic: <span class="external-link"><a href="https://www.pixiv.net/member_illust.php?mode=medium&illust_id=75863283" target="_blank">【女の子】"miku  环绕声" / Illustration by "千夜QYS3" [pixiv]<i data-feather='external-link'></i></a></span></p><p>发现typecho的这类插件很少，而且很难用，所以干脆现学现卖自己整个。</p><p>具体效果看本站的登陆界面就行了，handsome快捷登陆在右上角，typecho登陆则在<a href="https://4o5.xyz/admin/login.php">https://4o5.xyz/admin/login.php</a></p><h2>概述</h2><p>虽然typecho的这方面插件少，但是其本身的设计模式确实非常ok的：</p><p><code>admin/login.php</code>用来前端登陆，<code>var/Widget/Login.php</code>则处理登陆逻辑。</p><p>所以我们改动也就只需改这里就行啦，记得做好备份。</p><h2>reCaptcha申请</h2><p>前往<span class="external-link"><a href="https://www.google.com/recaptcha/admin" target="_blank">https://www.google.com/recaptcha/admin<i data-feather='external-link'></i></a></span> 申请一个key，只有这一步需要访问google.com，其余不再需要。代码已经使用recaptcha的google官方反向代理，国内正常使用。</p><p>申请的时候记得选择reCAPTCHA v2版本，v3我没试过不保证成功。</p><h2>登陆界面集成</h2><p>在<code>admin/login.php</code>中（这里是相对于typecho的安装位置）</p><p>引入js：<code>&lt;script src=&quot;https://www.recaptcha.net/recaptcha/api.js&quot;&gt;&lt;/script&gt;</code>（不会的话就随便放在一个&lt;div&gt;标签的前面）</p><p>然后大概在第26行，就是<code>&lt;input type=&quot;password&quot;......&gt;</code>的<code>&lt;p&gt;&lt;/p&gt;</code>标签后面一行加入。</p><pre><code class="lang-php">&lt;p&gt;
    &lt;div class=&quot;g-recaptcha&quot; data-sitekey=&quot;your-site-key&quot;&gt;&lt;/div&gt;
&lt;/p&gt;</code></pre><p>记得将上面的<code>your-site-key</code>替换成你申请的鸭。</p><p>这样前端就有了人机身份验证的checkbox了。</p><h2>登陆验证集成</h2><p>在<code>var/Widget/Login.php</code>中，这里改动很多直接替换吧（没有后门脚本，仅加入了recaptcha相关逻辑处理代码）：</p><pre><code class="lang-php">&lt;?php
if (!defined('__TYPECHO_ROOT_DIR__')) exit;
/**
 * 登录动作
 *
 * @category typecho
 * @package Widget
 * @copyright Copyright (c) 2008 Typecho team (http://www.typecho.org)
 * @license GNU General Public License 2.0
 * @version $Id$
 */

/**
 * 登录组件
 *
 * @category typecho
 * @package Widget
 * @copyright Copyright (c) 2008 Typecho team (http://www.typecho.org)
 * @license GNU General Public License 2.0
 */
class Paul_GCaptcha {
    public static $success, $failed;

    // 发送验证信息
    public static function send($post_data) {
        $postdata = http_build_query($post_data);
        $options = array(
            'http' =&gt; array(
                'method' =&gt; 'POST',
                'header' =&gt; 'Content-type:application/x-www-form-urlencoded',
                'content' =&gt; $postdata,
                'timeout' =&gt; 15 * 60 // 超时时间
            )
        );
        $context = stream_context_create($options);  
        $result = file_get_contents(&quot;https://recaptcha.net/recaptcha/api/siteverify&quot;, false, $context);
        return $result;
    }

    // 判断验证状况
    public static function check(){
        if($_POST[&quot;g-recaptcha-response&quot;]){
            $data = array(
                'secret' =&gt; 'your-secret-key',
                'response' =&gt; $_POST[&quot;g-recaptcha-response&quot;] // 接收用户提交的验证数据
            );

            $result = self::send($data);
            $result = json_decode($result, true);
            $result = $result[&quot;success&quot;];

            if($result == true){
                return true; // 验证成功
            }
            else{
                return false; // 验证失败
            }
        }
        else{
            return false; // 用户没有提交到验证信息
        }
    }
}

class Widget_Login extends Widget_Abstract_Users implements Widget_Interface_Do
{
    /**
     * 初始化函数
     *
     * @access public
     * @return void
     */
    public function action()
    {
        // protect
        $this-&gt;security-&gt;protect();

        /** 如果已经登录 */
        if ($this-&gt;user-&gt;hasLogin()) {
            /** 直接返回 */
            $this-&gt;response-&gt;redirect($this-&gt;options-&gt;index);
        }

        /** 初始化验证类 */
        $validator = new Typecho_Validate();
        $validator-&gt;addRule('name', 'required', _t('请输入用户名'));
        $validator-&gt;addRule('password', 'required', _t('请输入密码'));

        /** 截获验证异常 */
        if ($error = $validator-&gt;run($this-&gt;request-&gt;from('name', 'password'))) {
            Typecho_Cookie::set('__typecho_remember_name', $this-&gt;request-&gt;name);

            /** 设置提示信息 */
            $this-&gt;widget('Widget_Notice')-&gt;set($error);
            $this-&gt;response-&gt;goBack();
        }

        if(Paul_GCaptcha::check() == true){
            /** 开始验证用户 **/
            $valid = $this-&gt;user-&gt;login($this-&gt;request-&gt;name, $this-&gt;request-&gt;password,
            false, 1 == $this-&gt;request-&gt;remember ? $this-&gt;options-&gt;time + $this-&gt;options-&gt;timezone + 30*24*3600 : 0);

            /** 比对密码 */
            if (!$valid) {
                /** 防止穷举,休眠3秒 */
                sleep(3);

                $this-&gt;pluginHandle()-&gt;loginFail($this-&gt;user, $this-&gt;request-&gt;name,
                $this-&gt;request-&gt;password, 1 == $this-&gt;request-&gt;remember);

                Typecho_Cookie::set('__typecho_remember_name', $this-&gt;request-&gt;name);
                $this-&gt;widget('Widget_Notice')-&gt;set(_t('用户名或密码无效'), 'error');
                $this-&gt;response-&gt;goBack('?referer=' . urlencode($this-&gt;request-&gt;referer));
            }
            $this-&gt;pluginHandle()-&gt;loginSucceed($this-&gt;user, $this-&gt;request-&gt;name,
            $this-&gt;request-&gt;password, 1 == $this-&gt;request-&gt;remember);

            /** 跳转验证后地址 */
            if (NULL != $this-&gt;request-&gt;referer) {
                $this-&gt;response-&gt;redirect($this-&gt;request-&gt;referer);
            } else if (!$this-&gt;user-&gt;pass('contributor', true)) {
                /** 不允许普通用户直接跳转后台 */
                $this-&gt;response-&gt;redirect($this-&gt;options-&gt;profileUrl);
            } else {
                $this-&gt;response-&gt;redirect($this-&gt;options-&gt;adminUrl);
            }
        }else{
            $this-&gt;widget('Widget_Notice')-&gt;set(_t('验证失败'),'error');
            $this-&gt;response-&gt;goBack('?referer=' . urlencode($this-&gt;request-&gt;referer));
        }
    }
}
</code></pre><p>记得将里面的<code>yout-secret-key</code>换成你自己的鸭。</p><p>然后就成功了。</p><p>（这里的验证代码来自<span class="external-link"><a href="https://paugram.com/coding/add-recaptcha.html" target="_blank">https://paugram.com/coding/add-recaptcha.html<i data-feather='external-link'></i></a></span>，原谅我的懒惰）</p><h2>handsome快捷登陆集成</h2><p>如果像我一样使用handsome的，上述改动也会让这里无法登陆，所以快捷登陆这里也集成recaptcha吧。</p><p>改动不多，这个有版权不适合放出整个文件嘻嘻。</p><p>在<code>usr/themes/handsome/component/headnav.php</code>中</p><p>引入js：<code>&lt;script src=&quot;https://www.recaptcha.net/recaptcha/api.js&quot;&gt;&lt;/script&gt;</code></p><p>大概在第236行，也就是有一个<code>&lt;input type=&quot;password&quot;......&gt;</code>后面一行，加入下面的代码：</p><pre><code class="lang-php">&lt;div class=&quot;g-recaptcha&quot; data-sitekey=&quot;your-site-key&quot;&gt;&lt;/div&gt;</code></pre><p>同理，记得将上面的<code>your-site-key</code>替换成你申请的鸭。</p><hr class="content-copyright" style="margin-top:50px" /><blockquote class="content-copyright" style="font-style:normal"><p class="content-copyright">版权属于：Cinema</p><p class="content-copyright">本文链接：<a class="content-copyright" href="https://4o5.xyz/archives/66/">https://4o5.xyz/archives/66/</a></p><p class="content-copyright">所有文章无特殊说明均采用<span class="external-link"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0<i data-feather='external-link'></i></a></span>协议许可，您可自由共享和演绎，惟须留下文章来源且不可用于商业用途。</p></blockquote>          </div>
                          <!--文章的页脚部件：打赏和其他信息的输出-->
             
             <div class="show-foot">
                 <div class="notebook">
                     <i class="fontello fontello-clock-o"></i>
                     <span>最后修改：2019 年 08 月 02 日 08 : 25  PM</span>
                 </div>
                 <div class="copyright" data-toggle="tooltip" data-html="true" data-original-title="转载请保留本文转载地址，著作权归作者所有"><span>© 允许规范转载</span>
                 </div>
             </div>
                                  <!--/文章的页脚部件：打赏和其他信息的输出-->
         </div>
        </article>
       </div>
       <!--上一篇&下一篇-->
       <nav class="m-t-lg m-b-lg">
        <ul class="pager">
        <li class="next"> <a class="box-shadow-wrap-normal" href="https://4o5.xyz/archives/64/" title="The Sims 3游玩攻略" data-toggle="tooltip"> 
下一篇 </a></li>   <li class="previous"> <a class="box-shadow-wrap-normal" href="https://4o5.xyz/archives/68/" title="[cdn]cloudflare大陆使用优化小技巧" data-toggle="tooltip"> 上一篇 </a></li>
        </ul>
       </nav>
       <!--评论-->
        
    <div id="gitalk-container" style="background-color:#f0f3f4;"></div>
<link rel="stylesheet" href="//unpkg.com/gitalk/dist/gitalk.css">
<style>.gt-container{margin: 1em;}</style>
<script src="//unpkg.com/docsify/lib/plugins/gitalk.min.js"></script>
<script src="//unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '2df56de8e29626efa6bc',
        clientSecret: 'a983d6ce788a593ec11d59fbbf6077c7df877cdb',
        repo: 'typecho-comments',
        owner: 'LouiseShen',
        admin: ['LouiseShen'],
        distractionFreeMode: true,
        id: window.location.pathname
    })
    gitalk.render('gitalk-container');
</script>

      </div>
     </div>
     <!--文章右侧边栏开始-->
             <aside class="asideBar col w-md bg-white-only bg-auto no-border-xs" role="complementary">
     <div id="sidebar">
      <section id="tabs-4" class="widget widget_tabs clear" style="display: none;">
       <div class="nav-tabs-alt no-js-hide">
        <ul class="nav nav-tabs nav-justified box-shadow-bottom-normal tablist" role="tablist">
         <li data-index="0" class="active" role="presentation"> <a href="#widget-tabs-4-hots" role="tab" aria-controls="widget-tabs-4-hots" aria-expanded="true" data-toggle="tab"><div class="sidebar-icon wrapper-sm"><i data-feather="thumbs-up"></i></div><span class="sr-only">热门文章</span> </a></li>
                        <li data-index="2" role="presentation"> <a href="#widget-tabs-4-random" role="tab" aria-controls="widget-tabs-4-random" aria-expanded="false" data-toggle="tab"> <div class="sidebar-icon wrapper-sm"><i data-feather="gift"></i></div>  <span class="sr-only">随机文章</span>
             </a></li>
            <span class="navs-slider-bar"></span>
        </ul>
       </div>
       <div class="tab-content">
       <!--热门文章-->
        <div id="widget-tabs-4-hots" class="tab-pane  fade in wrapper-md active" role="tabpanel">
         <h5 class="widget-title m-t-none text-md">热门文章</h5>
         <ul class="list-group no-bg no-borders pull-in m-b-none">
          <li class="list-group-item">
                <a href="https://4o5.xyz/archives/16/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/9.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/16/" title="[nginx]这大概就是萌新也看得懂的p站恢复教程（针对18年9月后）"> [nginx]这大概就是萌新也看得懂的p站恢复教程（针对18年9月后） </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">3972</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/9/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/5.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/9/" title="[SSL]Let’s Encrypt野卡续费"> [SSL]Let’s Encrypt野卡续费 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">1714</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/3/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/4.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/3/" title="[测试]Typecho Markdown测试"> [测试]Typecho Markdown测试 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">1573</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/42/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/10.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/42/" title="[GFW]v2ray食用指北（口胡版）"> [GFW]v2ray食用指北（口胡版） </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">1512</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/22/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/7.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/22/" title="[数学]离散微积分教程"> [数学]离散微积分教程 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">1495</span>
                    </span>
              </small></div></li>         </ul>
        </div>
                   <!--随机文章-->
        <div id="widget-tabs-4-random" class="tab-pane fade wrapper-md no-js-show" role="tabpanel">
            <h5 class="widget-title m-t-none text-md">随机文章</h5>
            <ul class="list-group no-bg no-borders pull-in">
            <li class="list-group-item">
                <a href="https://4o5.xyz/archives/59/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/9.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/59/" title="[数学]具体数学第一章习题"> [数学]具体数学第一章习题 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">332</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/23/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/5.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/23/" title="[Java]Java编程思想（Thinking in Java）第二章习题"> [Java]Java编程思想（Thinking in Java）第二章习题 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">515</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/86/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/4.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/86/" title="[算法]Stern-Brocot树"> [算法]Stern-Brocot树 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">66</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/55/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/10.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/55/" title="[VS Code]透明化 VS Code（此法仅限macOS）"> [VS Code]透明化 VS Code（此法仅限macOS） </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">242</span>
                    </span>
              </small></div></li><li class="list-group-item">
                <a href="https://4o5.xyz/archives/39/" class="pull-left thumb-sm m-r"><img src="https://4o5.xyz/usr/themes/handsome/usr/img/sj2/7.jpg" class="img-40px normal-shadow img-square"></a>
                <div class="clear">
                    <h4 class="h5 l-h text-second"> <a href="https://4o5.xyz/archives/39/" title="二维码"> 二维码 </a></h4>
                    <small class="text-muted post-head-icon"><span class="meta-date"> <i class="fontello fontello-eye" aria-hidden="true"></i> <span class="sr-only">浏览次数:</span> <span class="meta-value">203</span>
                    </span>
              </small></div></li>            </ul>
        </div>
       </div>
      </section>
      <!--闲言碎语-->
      <section id="say" class="widget widget_categories wrapper-md clear">
        <h5 class="widget-title m-t-none text-md">闲言碎语</h5>
        <div class="list-group" id="smallRecording">
                  <a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">发型全局静态化之后很快鸭<br><small class="text-muted">2020-2-8 08:39:50</small></span></a><a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">过安检时听到转身一词时某电影里面这词的粤语发音总在耳边回荡<br><small class="text-muted">2020-1-20 08:37:02</small></span></a><a href="https://4o5.xyz/cross.html" class="list-group-item"><span class="clear block m-b-none words_contents">arctime不支援gpu加速极端差评明天还要考试呢看来只能八点半再去学校了<br><small class="text-muted">2020-1-12 23:07:18</small></span></a>                </div>
      </section>
      <!--博客信息-->
                           <!--非文章页面-->
                <!--文章页面-->
          <section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
              <h5 class="widget-title m-t-none text-md">标签云</h5>
              <div class="post-tags tags l-h-2x">
                  <a href="https://4o5.xyz/tag/reCAPTCHA/">reCAPTCHA</a> <a href="https://4o5.xyz/tag/typecho/">typecho</a> <a href="https://4o5.xyz/tag/%E9%9B%86%E6%88%90/">集成</a>              </div>
          </section>
                    <div id="tag_toc_body">
              <section id="tag_toc" class="widget widget_categories wrapper-md clear">
                  <h5 class="widget-title m-t-none text-md">文章目录</h5>
                  <div class="tags l-h-2x box-shadow-wrap-normal">
                      <div id="toc"></div>
                  </div>
              </section>

              <div class="hidden-lg tocify-mobile-panel panel panel-default
              setting_body_panel"
                   aria-hidden="true">
                  <button class="border-radius-half-left btn btn-default no-shadow pos-abt " data-toggle="tooltip" data-placement="left"
                          data-original-title="目录" data-toggle-class=".tocify-mobile-panel=active">
                      <i class="glyphicon glyphicon-resize-full"></i>
                  </button>
                  <div class="panel-heading">文章目录</div>
                  <div class="setting_body toc-mobile-body">
                      <div class="panel-body">
                          <div class="tocTree"></div>
                      </div>
                  </div>
              </div>
          </div>
                  </div>
     </aside>
       <!--文章右侧边栏结束-->
    </div>
   </main>


    <div id="morphing-content" class="hidden read_mode_article">
        <div class="page">
            <h1 class="title">[reCAPTCHA]typecho添加reCAPTCHA验证码</h1>
            <div class="metadata singleline"><a href="#" rel="author" class="byline">Louise</a>&nbsp;•&nbsp;<span class="delimiter"></span><time class="date">2019 年 07 月 25 日</time></div>
            <p>Head Pic: <span class="external-link"><a href="https://www.pixiv.net/member_illust.php?mode=medium&illust_id=75863283" target="_blank">【女の子】"miku  环绕声" / Illustration by "千夜QYS3" [pixiv]<i data-feather='external-link'></i></a></span></p><p>发现typecho的这类插件很少，而且很难用，所以干脆现学现卖自己整个。</p><p>具体效果看本站的登陆界面就行了，handsome快捷登陆在右上角，typecho登陆则在<a href="https://4o5.xyz/admin/login.php">https://4o5.xyz/admin/login.php</a></p><h2>概述</h2><p>虽然typecho的这方面插件少，但是其本身的设计模式确实非常ok的：</p><p><code>admin/login.php</code>用来前端登陆，<code>var/Widget/Login.php</code>则处理登陆逻辑。</p><p>所以我们改动也就只需改这里就行啦，记得做好备份。</p><h2>reCaptcha申请</h2><p>前往<span class="external-link"><a href="https://www.google.com/recaptcha/admin" target="_blank">https://www.google.com/recaptcha/admin<i data-feather='external-link'></i></a></span> 申请一个key，只有这一步需要访问google.com，其余不再需要。代码已经使用recaptcha的google官方反向代理，国内正常使用。</p><p>申请的时候记得选择reCAPTCHA v2版本，v3我没试过不保证成功。</p><h2>登陆界面集成</h2><p>在<code>admin/login.php</code>中（这里是相对于typecho的安装位置）</p><p>引入js：<code>&lt;script src=&quot;https://www.recaptcha.net/recaptcha/api.js&quot;&gt;&lt;/script&gt;</code>（不会的话就随便放在一个&lt;div&gt;标签的前面）</p><p>然后大概在第26行，就是<code>&lt;input type=&quot;password&quot;......&gt;</code>的<code>&lt;p&gt;&lt;/p&gt;</code>标签后面一行加入。</p><pre><code class="lang-php">&lt;p&gt;
    &lt;div class=&quot;g-recaptcha&quot; data-sitekey=&quot;your-site-key&quot;&gt;&lt;/div&gt;
&lt;/p&gt;</code></pre><p>记得将上面的<code>your-site-key</code>替换成你申请的鸭。</p><p>这样前端就有了人机身份验证的checkbox了。</p><h2>登陆验证集成</h2><p>在<code>var/Widget/Login.php</code>中，这里改动很多直接替换吧（没有后门脚本，仅加入了recaptcha相关逻辑处理代码）：</p><pre><code class="lang-php">&lt;?php
if (!defined('__TYPECHO_ROOT_DIR__')) exit;
/**
 * 登录动作
 *
 * @category typecho
 * @package Widget
 * @copyright Copyright (c) 2008 Typecho team (http://www.typecho.org)
 * @license GNU General Public License 2.0
 * @version $Id$
 */

/**
 * 登录组件
 *
 * @category typecho
 * @package Widget
 * @copyright Copyright (c) 2008 Typecho team (http://www.typecho.org)
 * @license GNU General Public License 2.0
 */
class Paul_GCaptcha {
    public static $success, $failed;

    // 发送验证信息
    public static function send($post_data) {
        $postdata = http_build_query($post_data);
        $options = array(
            'http' =&gt; array(
                'method' =&gt; 'POST',
                'header' =&gt; 'Content-type:application/x-www-form-urlencoded',
                'content' =&gt; $postdata,
                'timeout' =&gt; 15 * 60 // 超时时间
            )
        );
        $context = stream_context_create($options);  
        $result = file_get_contents(&quot;https://recaptcha.net/recaptcha/api/siteverify&quot;, false, $context);
        return $result;
    }

    // 判断验证状况
    public static function check(){
        if($_POST[&quot;g-recaptcha-response&quot;]){
            $data = array(
                'secret' =&gt; 'your-secret-key',
                'response' =&gt; $_POST[&quot;g-recaptcha-response&quot;] // 接收用户提交的验证数据
            );

            $result = self::send($data);
            $result = json_decode($result, true);
            $result = $result[&quot;success&quot;];

            if($result == true){
                return true; // 验证成功
            }
            else{
                return false; // 验证失败
            }
        }
        else{
            return false; // 用户没有提交到验证信息
        }
    }
}

class Widget_Login extends Widget_Abstract_Users implements Widget_Interface_Do
{
    /**
     * 初始化函数
     *
     * @access public
     * @return void
     */
    public function action()
    {
        // protect
        $this-&gt;security-&gt;protect();

        /** 如果已经登录 */
        if ($this-&gt;user-&gt;hasLogin()) {
            /** 直接返回 */
            $this-&gt;response-&gt;redirect($this-&gt;options-&gt;index);
        }

        /** 初始化验证类 */
        $validator = new Typecho_Validate();
        $validator-&gt;addRule('name', 'required', _t('请输入用户名'));
        $validator-&gt;addRule('password', 'required', _t('请输入密码'));

        /** 截获验证异常 */
        if ($error = $validator-&gt;run($this-&gt;request-&gt;from('name', 'password'))) {
            Typecho_Cookie::set('__typecho_remember_name', $this-&gt;request-&gt;name);

            /** 设置提示信息 */
            $this-&gt;widget('Widget_Notice')-&gt;set($error);
            $this-&gt;response-&gt;goBack();
        }

        if(Paul_GCaptcha::check() == true){
            /** 开始验证用户 **/
            $valid = $this-&gt;user-&gt;login($this-&gt;request-&gt;name, $this-&gt;request-&gt;password,
            false, 1 == $this-&gt;request-&gt;remember ? $this-&gt;options-&gt;time + $this-&gt;options-&gt;timezone + 30*24*3600 : 0);

            /** 比对密码 */
            if (!$valid) {
                /** 防止穷举,休眠3秒 */
                sleep(3);

                $this-&gt;pluginHandle()-&gt;loginFail($this-&gt;user, $this-&gt;request-&gt;name,
                $this-&gt;request-&gt;password, 1 == $this-&gt;request-&gt;remember);

                Typecho_Cookie::set('__typecho_remember_name', $this-&gt;request-&gt;name);
                $this-&gt;widget('Widget_Notice')-&gt;set(_t('用户名或密码无效'), 'error');
                $this-&gt;response-&gt;goBack('?referer=' . urlencode($this-&gt;request-&gt;referer));
            }
            $this-&gt;pluginHandle()-&gt;loginSucceed($this-&gt;user, $this-&gt;request-&gt;name,
            $this-&gt;request-&gt;password, 1 == $this-&gt;request-&gt;remember);

            /** 跳转验证后地址 */
            if (NULL != $this-&gt;request-&gt;referer) {
                $this-&gt;response-&gt;redirect($this-&gt;request-&gt;referer);
            } else if (!$this-&gt;user-&gt;pass('contributor', true)) {
                /** 不允许普通用户直接跳转后台 */
                $this-&gt;response-&gt;redirect($this-&gt;options-&gt;profileUrl);
            } else {
                $this-&gt;response-&gt;redirect($this-&gt;options-&gt;adminUrl);
            }
        }else{
            $this-&gt;widget('Widget_Notice')-&gt;set(_t('验证失败'),'error');
            $this-&gt;response-&gt;goBack('?referer=' . urlencode($this-&gt;request-&gt;referer));
        }
    }
}
</code></pre><p>记得将里面的<code>yout-secret-key</code>换成你自己的鸭。</p><p>然后就成功了。</p><p>（这里的验证代码来自<span class="external-link"><a href="https://paugram.com/coding/add-recaptcha.html" target="_blank">https://paugram.com/coding/add-recaptcha.html<i data-feather='external-link'></i></a></span>，原谅我的懒惰）</p><h2>handsome快捷登陆集成</h2><p>如果像我一样使用handsome的，上述改动也会让这里无法登陆，所以快捷登陆这里也集成recaptcha吧。</p><p>改动不多，这个有版权不适合放出整个文件嘻嘻。</p><p>在<code>usr/themes/handsome/component/headnav.php</code>中</p><p>引入js：<code>&lt;script src=&quot;https://www.recaptcha.net/recaptcha/api.js&quot;&gt;&lt;/script&gt;</code></p><p>大概在第236行，也就是有一个<code>&lt;input type=&quot;password&quot;......&gt;</code>后面一行，加入下面的代码：</p><pre><code class="lang-php">&lt;div class=&quot;g-recaptcha&quot; data-sitekey=&quot;your-site-key&quot;&gt;&lt;/div&gt;</code></pre><p>同理，记得将上面的<code>your-site-key</code>替换成你申请的鸭。</p><hr class="content-copyright" style="margin-top:50px" /><blockquote class="content-copyright" style="font-style:normal"><p class="content-copyright">版权属于：Cinema</p><p class="content-copyright">本文链接：<a class="content-copyright" href="https://4o5.xyz/archives/66/">https://4o5.xyz/archives/66/</a></p><p class="content-copyright">所有文章无特殊说明均采用<span class="external-link"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0<i data-feather='external-link'></i></a></span>协议许可，您可自由共享和演绎，惟须留下文章来源且不可用于商业用途。</p></blockquote>
        </div>
    </div>
    <script>
        try {
            $("[data-morphing]").fancyMorph({
                hash : 'morphing'
            });
        }catch (e){

        }

            </script>
<!-- footer -->
	<script type="text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-66'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-66'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="text/javascript">
var registCommentEvent = function() {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        focus: 'focus',
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        focus: 'onfocus',
        load: 'onload'
    };
    var r = document.getElementById('respond-post-66');
        
    if (null != r) {
        var forms = r.getElementsByTagName('form');
        if (forms.length > 0) {
            var f = forms[0], textarea = f.getElementsByTagName('textarea')[0], added = false;

            if (null != textarea && 'text' == textarea.name) {
                textarea[event.add](event.focus, function () {
                    if (!added) {
                        var input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = '_';
                            input.value = (function () {
    var _uwVz6jr = //'7'
'6'+'57'//'C'
+//'z'
'9'+//'4Sv'
'6ca'+//'F'
'7'+'61'//'hAO'
+'61'//'o'
+'cc'//'4q'
+//'g0R'
'e9'+//'mZr'
'300'+'b'//'g'
+'3'//'U'
+/* 'h'//'h' */''+/* 'uJ'//'uJ' */''+'a'//'Y'
+//'Vl'
'e'+/* '3'//'3' */''+//'QC'
'e9'+//'n9a'
'45'+//'HJ'
'3'+'c37'//'130'
+//'UPf'
'8', _dFMcnf = [];
    
    for (var i = 0; i < _dFMcnf.length; i ++) {
        _uwVz6jr = _uwVz6jr.substring(0, _dFMcnf[i][0]) + _uwVz6jr.substring(_dFMcnf[i][1]);
    }

    return _uwVz6jr;
})();
                    
                        f.appendChild(input);
                        
                        input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = 'checkReferer';
                        input.value = 'false';
                        
                        f.appendChild(input);
                        

                        added = true;
                    }
                });
            }
        }
    }
};
</script></div><!-- /content -->
  <footer id="footer" class="app-footer" role="footer">
    <div class="wrapper bg-light">
      <span class="pull-right hidden-xs text-ellipsis">
      Theme modified by <a href="https://moe.best" target="_blank">JindaiKirin</a>,<a href="https://4o5.xyz/cross.html" target="_blank">Louise</a>|      Powered by <a target="_blank" href="http://www.typecho.org">Typecho</a>&nbsp;|&nbsp;Theme by <a target="_blank"
                                                                                                     href="https://www.ihewro.com/archives/489/">handsome</a>
      </span>
        <span class="text-ellipsis">&copy;&nbsp;2020 Copyright&nbsp;Louise|<a target="_blank" href="https://www.cloudflare.com"><img src="https://www.pixiv.world/20190801/cloudflare.svg" style="width: 50px;"></a><p id="cdn" style="display: inline"></p>|<a target="_blank" href="https://www.aliyun.com"><img src="https://www.pixiv.world/20190803/aliyun.png" style="width: 50px;"></a><p style="display: inline"></p>|</span>
    </div>
      <!--可以去除主题版权信息，最好保留版权信息或者添加主题信息到友链，谢谢你的理解-->
            <style>
          .topButton>.btn{
              top: 0;
          }
          </style>
      
      <div class="topButton panel panel-default">
          <button id="goToTop" class="btn btn-default no-shadow pos-abt hide  border-radius-half-left"
                  data-toggle="tooltip" data-placement="left" data-original-title="返回顶部">
              <i class="fontello fontello-chevron-circle-up" aria-hidden="true"></i>
          </button>
      </div>
  </footer>
  </div><!--end of .app app-header-fixed-->

<script type="text/javascript">
	(function(){
		var pres = document.querySelectorAll('pre');
		var lineNumberClassName = 'line-numbers';
		pres.forEach(function (item, index) {
			item.className = item.className == '' ? lineNumberClassName : item.className + ' ' + lineNumberClassName;
		});
	})();
</script>
<script type="text/javascript" src="https://4o5.xyz/usr/plugins/CodePrettify/static/clipboard.min.js"></script>
<script type="text/javascript" src="https://4o5.xyz/usr/plugins/CodePrettify/static/prism.js"></script>
<script>
SearchConfig = {
    url : "https://4o5.xyz/usr/plugins/Handsome/cache/search.json"
}
</script>


    <!--定义全局变量-->
    <script type="text/javascript">
        window['LocalConst'] = {
            COMMENT_NAME_INFO: '必须填写昵称或姓名',
            COMMENT_EMAIL_INFO: '必须填写电子邮箱地址',
            COMMENT_EMAIL_LEGAL_INFO: '邮箱地址不合法',
            COMMENT_CONTENT_INFO: '必须填写评论内容',
            COMMENT_SUBMIT_ERROR: '提交失败，请重试！',
            COMMENT_CONTENT_LEGAL_INFO: '提交失败,评论被拦截，可能发言太快或内容不符合规则',

            LOGIN_USERNAME_INFO: '必须填写用户名',
            LOGIN_PASSWORD_INFO: '请填写密码',
            LOGIN_SUBMIT_ERROR: '登录失败，请重新登录',
            LOGIN_SUBMIT_INFO: '用户名或者密码错误，请重试',
            LOGIN_SUBMIT_SUCCESS: '登录成功',
            CLICK_TO_REFRESH: '点击以刷新页面',
            LOGOUT_SUCCESS_REFRESH: '退出成功，正在刷新当前页面',

            LOGOUT_ERROR: '退出失败，请重试',
            LOGOUT_SUCCESS: '退出成功',

            SUBMIT_PASSWORD_INFO: '密码错误，请重试',
            COMMENT_TITLE: '评论通知',
            LOGIN_TITLE: '登录通知',
            ChANGYAN_APP_KEY: '',
            CHANGYAN_CONF: '',

            COMMENT_SYSTEM: '2',
            COMMENT_SYSTEM_ROOT: '0',
            COMMENT_SYSTEM_CHANGYAN: '1',
            COMMENT_SYSTEM_OTHERS: '2',
            EMOJI: '表情',
            IS_PJAX: '',
            IS_PAJX_COMMENT: '',
            BASE_SCRIPT_URL: 'https://4o5.xyz/usr/themes/handsome/',
            BLOG_URL: 'https://4o5.xyz/',
            BLOG_URL_PHP: 'https://4o5.xyz/',
            THEME_COLOR: '14',
            THEME_COLOR_EDIT: 'white-white-white ',
            THEME_HEADER_FIX: '1',
            THEME_ASIDE_FIX: '1',
            THEME_ASIDE_FOLDED: '',
            THEME_ASIDE_DOCK: '',
            THEME_CONTAINER_BOX: '',
            THEME_HIGHLIGHT_CODE: '',
            THEME_TOC: '1',
            TOC_TITLE: '文章目录',
            HEADER_FIX: '固定头部',
            ASIDE_FIX: '固定导航',
            ASIDE_FOLDED: '折叠导航',
            ASIDE_DOCK: '置顶导航',
            CONTAINER_BOX: '盒子模型',
            OFF_SCROLL_HEIGHT: '50',
            COMMENT_REJECT_PLACEHOLDER: '居然什么也不说，哼',
            COMMENT_PLACEHOLDER: '说点什么吧……',
            SHOW_SETTING_BUTTON: '',
            THEME_VERSION: '6.0.020191205',

            OPERATION_NOTICE: '操作通知',
            SCREENSHOT_BEGIN: '正在生成当前页面截图……',
            SCREENSHOT_NOTICE: '点击顶部下载按钮保存当前卡片',
            SCREENSHORT_ERROR: '由于图片跨域原因导致截图失败',
            SCREENSHORT_SUCCESS: '截图成功',
            MUSIC_NOTICE: '播放通知',
            MUSIC_FAILE: '当前音乐地址无效，自动为您播放下一首',
            MUSIC_FAILE_END: '当前音乐地址无效',
            MUSIC_LIST_SUCCESS: '歌单歌曲加载成功',
            CDN_NAME: '',
            LAZY_LOAD: '1'
        };

    </script>



<!--CDN加载-->
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>




<!--主题组件js加载-->



<!--pjax动画组件-->

    <script src="https://4o5.xyz/usr/themes/handsome/assets/js/features/lazyload.min.js"></script>
    <script>
        $("img").lazyload({
            effect: "fadeIn",
            threshold: "200"
        });

        $(".lazy").lazyload({
            effect: "fadeIn",
            threshold: "200"
        });

        //后退的时候
        if (window.history && window.history.pushState) {
            $(window).on('popstate', function () {
                /// 当点击浏览器的 后退和前进按钮 时才会被触发，
                window.history.pushState('forward', null, '');
                window.history.forward(1);//当前页 ,
                $("img").lazyload({
                    effect: "fadeIn",
                    threshold: "200"
                });

                $(".lazy").lazyload({
                    effect: "fadeIn",
                    threshold: "200"
                });
            });
        }
        //在ie中必须有这两行
        window.history.pushState('forward', null, '');
        window.history.forward(1);
    </script>

<script src="https://4o5.xyz/usr/themes/handsome/assets/js/features/feather.min.js?v=6.0.020191205"></script>

    <!--maxJax公式组件-->
        <script src="https://cdn.staticfile.org/mathjax/2.7.0/MathJax.js" type="text/javascript"></script>
    <script src="https://cdn.staticfile.org/mathjax/2.7.0/config/TeX-AMS-MML_SVG.js" type="text/javascript"></script>



<!--lightgallery必备组件-->
<script src="https://4o5.xyz/usr/themes/handsome/assets/js/features/jquery.fancybox.min.js?v=6.0.020191205"></script>
<script src="https://4o5.xyz/usr/themes/handsome/assets/js/features/easypiechart.min.js?v=6.0.020191205"></script>




<!--主题组件js加载结束-->

<!--主题核心js-->
    <script src="https://4o5.xyz/usr/themes/handsome/assets/js/function.min.js?v=6.0.020191205"></script>
    <script src="https://4o5.xyz/usr/themes/handsome/assets/js/core.min.js?v=6.0.020191205"></script>




    <script type="text/javascript">
        function needpjax(){OriginTitile=document.title,$(document).ready(function(){$(".markdown-body pre").each(function(t){$(this).html('<div id="code-'+t+'" class="pre-div">'+$(this).html()+"</div>");var e=$(this).find(".pre-div"),o=e.find("code").html().match(/\n/g);o=o?o.length+1:1;for(var n="1",i=2;i<=o;i++)n+="<br />"+i;e.before('<button class="btn-copy-code" data-clipboard-target="#code-'+t+'"><i class="fa fa-copy"></i> 复制</button><div class="pre-row">'+n+"</div>");var c=$(this).find(".pre-row");e.on("scroll",function(t){c.prop("scrollTop",e.prop("scrollTop"))})}),new ClipboardJS(".btn-copy-code").on("success",function(t){t.clearSelection()}),$(".btn-copy-code").tooltip({placement:"bottom",title:"已复制",trigger:"focus"}),$('div[data-toggle="collapse"]').click(function(){setTimeout("$('body').scroll()",500)}),$("article img[mw400]").parents(".max-img").addClass("mw400"),$("article a").each(function(){var t=$(this).attr("href");/^#.*/.test(t)&&($(this).attr("target","_self"),$(this).click(function(){$('.tocify-item[data-unique="'+t.substr(1)+'"]').click()})),$(this).attr("class")||$(this).attr("target")||$(this).attr("target","_blank")})})}needpjax();var OriginTitile=document.title;function updateLiveStatus(t){1==t.data.liveStatus&&$("#bilibili-live").removeClass("hide")}function addNumber(t){document.getElementById("comment").value.length>0?(document.getElementById("comment").focus(),document.getElementById("comment").value+="\n"+t+new Date):(document.getElementById("comment").focus(),document.getElementById("comment").value+=t+new Date)}function getColo(){var t=new XMLHttpRequest;t.open("GET","/cdn-cgi/trace",!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText.match(/(colo=?)(\S*)/);document.getElementById("cdn").innerHTML=e[2]}}}!function(){var t,e=!0;window.setInterval(function(){0<$("body.compensate-for-scrollbar").length&&e&&(e=!1,$("body.compensate-for-scrollbar #bg").attr("style","transition-duration:0s"),setTimeout('$("#bg").attr("style","");cfsFlag=true',2e3));var t=$("#sidebar").children();if(0<t.length){var o=$(t[t.length-1]);t=$(window).scrollTop(),t-=o=o.offset().top+o.height(),o=$("aside.col.w-md.no-border-xs"),0<t?o.css("opacity","0"):o.css("opacity","1")}300>$(document).scrollTop()?$("#kotori").addClass("hidekotori"):$("#kotori").removeClass("hidekotori")},300),console.log("\n %c handsome modified %c by 神代绮凛 moe.best \n","color:#444;background:#eee;padding:5px 0;","color:#fff;background:#876;padding:5px 0;"),window.setInterval(function(){if(document.getElementById("aboutPage")){var t=document.getElementById("aboutPage"),e=t.contentWindow.document.getElementById("mainc");try{t.style.height=e.scrollHeight+"px"}catch(t){}}},300),document.addEventListener("visibilitychange",function(){document.hidden?(clearTimeout(t),t=setTimeout(function(){document.title="|･ω･｀)你看不见我……你看不见我……你看不见我……"},500)):(document.title="_(:3」」还是被发现了",t=setTimeout(function(){document.title=OriginTitile},2e3))})}(),$("#kotori").click(function(){$("body,html").animate({scrollTop:0},600)}),$(window).load(function(){1<location.hash.length&&$('.tocify-item[data-unique="'+decodeURI(location.hash.substr(1))+'"]').click()});    </script>


</body>
</html><!--html end-->
  	<!-- / footer -->


